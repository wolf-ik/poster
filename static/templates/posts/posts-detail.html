<div>
    <h1><p>{{ post.name }}</p>
    <p><small>{{ post.title }}</small></p></h1>
    <p>Tags: <a class="well well-sm" style="margin-left: 10px;" ui-sref="app.search({query:tag.text})" ng-repeat="tag in post.tags">{{ tag.text }}</a></p>
    <br><hr>
    <div ng-bind-html="sce.trustAsHtml(post.content)"></div>
    <hr>
    <div class="well well-sm pull-right col-md-3">
        <h2 class="align-center">Rating: {{ post.rating | number:2 }}</h2>
        <div ng-show="canPostRating">
        <button class="btn btn-success btn-small" ng-click="setRating(value)" ng-repeat="value in [1,2,3,4,5]">
            {{ $index + 1 }}
        </button>
        </div>
    </div>
    <div ng-show="isPostOwnerOrAdmin">
        <button class="btn btn-warning" ui-sref=".edit">
            Edit
        </button>
        <button class="btn btn-danger" ng-click="deletePost()">
            Delete
        </button><br>
    </div>
    <div class="col-md-9">
        <hr>
        <div class="well" ng-repeat="comment in comments">
            {{ comment.content }}<br>
            Likes: {{ comment.likes.length }}
            <div class="left" ng-show="isAuthenticated">
                <button class="btn btn-info btn-small" ng-click="like($index)" ng-show="showLike($index)">
                    Like me
                </button>
                <button class="btn btn-warning btn-small" ng-click="unlike($index)" ng-show="!showLike($index)">
                    Unlike me
                </button>
            </div>
            <div class="right" ng-show="isCommentOwnerOrAdmin(comment.owner.username)">
                <button class="btn btn-info btn-small" ng-click="startEditComment($index)" data-toggle="modal" data-target="#edit-comment-modal-id">
                    Edit
                </button>
                <button class="btn btn-danger btn-small" ng-click="deleteComment($index)">
                    Delete
                </button>
            </div>
        </div>
        <button class="btn btn-info" data-toggle="modal" data-target="#new-comment-modal-id"  ng-show="isAuthenticated">New Comment</button>
    </div>
</div>


<div class="modal" id="new-comment-modal-id">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">New Comment</h4>
      </div>
      <div class="modal-body">
        <textarea class="form-control-static" ng-model="newComment"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="createNewComment()">Create</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="edit-comment-modal-id">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Edit Comment</h4>
      </div>
      <div class="modal-body">
        <textarea class="form-control-static" ng-model="editComment.content"></textarea>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-success" data-dismiss="modal" ng-click="saveEditComment()">Save</button>
      </div>
    </div>
  </div>
</div>